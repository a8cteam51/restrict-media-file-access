/* Target restricted files in the admin */
.rmfa-restricted-file {
	.thumbnail {
		position: relative;
		border: 2px solid #f36 !important;

		&::before {
			content: "";
			position: absolute;
			top: 0;
			right: 0;
			width: 16px;
			height: 16px;
			background: url('data:image/svg+xml;utf8,<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="32" fill="%23FF0000"/><g transform="translate(4,4) scale(1)"><path fill="white" d="M17,9V7c0-2.8-2.2-5-5-5S7,4.2,7,7v2c-1.7,0-3,1.3-3,3v7c0,1.7,1.3,3,3,3h10c1.7,0,3-1.3,3-3v-7C20,10.3,18.7,9,17,9z M9,7c0-1.7,1.3-3,3-3s3,1.3,3,3v2H9V7z M13,17c0,0.6-0.4,1-1,1s-1-0.4-1-1v-3c0-0.6,0.4-1,1-1s1,0.4,1,1V17z"/></g></svg>')
				no-repeat center center;
			background-size: contain;
			z-index: 10;
			pointer-events: none;
		}
	}

	.attachment-media-view {
		.thumbnail {
			height: auto;
			width: fit-content;
			margin: 0 auto;
		}
	}
}

/* Target restricted files in media library - list view */
.upload-php {
	.media-icon:has(img[rmfa-protected="true"]) {
		position: relative;
		border: 2px solid #f36 !important;
		&::before {
			content: "";
			position: absolute;
			top: 0;
			right: 0;
			width: 16px;
			height: 16px;
			background: url('data:image/svg+xml;utf8,<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="32" fill="%23FF0000"/><g transform="translate(4,4) scale(1)"><path fill="white" d="M17,9V7c0-2.8-2.2-5-5-5S7,4.2,7,7v2c-1.7,0-3,1.3-3,3v7c0,1.7,1.3,3,3,3h10c1.7,0,3-1.3,3-3v-7C20,10.3,18.7,9,17,9z M9,7c0-1.7,1.3-3,3-3s3,1.3,3,3v2H9V7z M13,17c0,0.6-0.4,1-1,1s-1-0.4-1-1v-3c0-0.6,0.4-1,1-1s1,0.4,1,1V17z"/></g></svg>')
				no-repeat center center;
			background-size: contain;
			z-index: 10;
			pointer-events: none;
		}
	}
}

/* Target images in block editor with a wrapper */
figure:has(img[src*="protected-files"]):not(
		:has(figure img[src*="protected-files"])
	)::before,
figure:has(video[src*="protected-files"])::before,
figure:has(audio[src*="protected-files"])::before,
.wp-block-file:has(a[href*="protected-files"])::before,
.wp-block-cover:has(img[src*="protected-files"])::before {
	content: "";
	position: absolute;
	top: 0;
	right: 0;
	width: 16px;
	height: 16px;
	background: url('data:image/svg+xml;utf8,<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="32" fill="%23FF0000"/><g transform="translate(4,4) scale(1)"><path fill="white" d="M17,9V7c0-2.8-2.2-5-5-5S7,4.2,7,7v2c-1.7,0-3,1.3-3,3v7c0,1.7,1.3,3,3,3h10c1.7,0,3-1.3,3-3v-7C20,10.3,18.7,9,17,9z M9,7c0-1.7,1.3-3,3-3s3,1.3,3,3v2H9V7z M13,17c0,0.6-0.4,1-1,1s-1-0.4-1-1v-3c0-0.6,0.4-1,1-1s1,0.4,1,1V17z"/></g></svg>')
		no-repeat center center;
	background-size: contain;
	z-index: 10;
	pointer-events: none;
}

/* Target restricted files in the block editor with a wrapper */
figure:has(img[src*="protected-files"]):not(
		:has(figure img[src*="protected-files"])
	),
figure:has(video[src*="protected-files"]),
figure:has(audio[src*="protected-files"]),
.wp-block-file:has(a[href*="protected-files"]),
.wp-block-cover:has(img[src*="protected-files"]) {
	border: 2px solid #f36 !important;

	img,
	a,
	video {
		border: none !important;
	}
}

/* Fallback for images in block editor which don't have a wrapper */
.editor-styles-wrapper img[src*="protected-files"],
.editor-styles-wrapper video[src*="protected-files"],
.block-editor-block-list__layout img[src*="protected-files"],
.wp-block img[src*="protected-files"] {
	border: 2px solid #f36;
}
